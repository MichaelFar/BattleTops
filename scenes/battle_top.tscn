[gd_scene load_steps=19 format=3 uid="uid://d1k0hl6r0jkh0"]

[ext_resource type="Script" uid="uid://bjho3cl6tlaet" path="res://scripts/battle_top.gd" id="1_ufdw3"]
[ext_resource type="PackedScene" uid="uid://dvsltihkmox2p" path="res://scenes/hit_particle.tscn" id="2_qrxi8"]
[ext_resource type="PackedScene" uid="uid://danlbv3qunohf" path="res://scenes/top_particle.tscn" id="2_xsedg"]
[ext_resource type="Shader" uid="uid://kku708lq2v04" path="res://shaders/battle_top.gdshader" id="3_akg2w"]
[ext_resource type="Shader" uid="uid://bt6f82gunrha7" path="res://shaders/top_particle_shader.tres" id="4_i6kec"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_ufdw3"]
resource_local_to_scene = true
friction = 0.0

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_ul6p0"]
resource_local_to_scene = true
friction = 0.0

[sub_resource type="SphereMesh" id="SphereMesh_ufdw3"]

[sub_resource type="SphereShape3D" id="SphereShape3D_xsedg"]
radius = 0.144169

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_ywf0b"]
resource_local_to_scene = true
emission_shape = 1
emission_sphere_radius = 0.2
gravity = Vector3(0, 9.8, 0)
linear_accel_min = 4.0
linear_accel_max = 16.0
scale_max = 1.2
turbulence_enabled = true
turbulence_noise_speed_random = 0.64

[sub_resource type="ShaderMaterial" id="ShaderMaterial_b5blt"]
resource_local_to_scene = true
render_priority = 0
shader = ExtResource("4_i6kec")
shader_parameter/ColorParameter = Color(0.796078, 0.066667, 0.078431, 1)

[sub_resource type="BoxMesh" id="BoxMesh_em0n2"]
resource_local_to_scene = true
material = SubResource("ShaderMaterial_b5blt")
size = Vector3(0.03, 0.03, 0.03)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_ywf0b"]
noise_type = 2
frequency = 0.0267

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_b5blt"]
seamless = true
as_normal_map = true
bump_strength = 32.0
noise = SubResource("FastNoiseLite_ywf0b")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_em0n2"]
resource_local_to_scene = true
render_priority = 0
shader = ExtResource("3_akg2w")
shader_parameter/texture_normal = SubResource("NoiseTexture2D_b5blt")
shader_parameter/normal_depth = 0.25
shader_parameter/color_compression = 6.0
shader_parameter/external_color = Color(0.141176, 0.72549, 0.694118, 1)
shader_parameter/external_emission = Color(0.541946, 0.636775, 0.741996, 1)

[sub_resource type="CylinderMesh" id="CylinderMesh_ufdw3"]
resource_local_to_scene = true
material = SubResource("ShaderMaterial_em0n2")

[sub_resource type="CapsuleMesh" id="CapsuleMesh_ufdw3"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_akg2w"]
metallic = 1.0
metallic_specular = 0.0
roughness = 0.0

[node name="BattleTop" type="RigidBody3D" node_paths=PackedStringArray("topHead", "topHeadMesh", "headCollision", "particle", "hitCheckTimer", "nameTag")]
physics_material_override = SubResource("PhysicsMaterial_ufdw3")
contact_monitor = true
max_contacts_reported = 4
script = ExtResource("1_ufdw3")
topHead = NodePath("TopHead")
topHeadMesh = NodePath("TopHead/TopHeadMesh")
physicsMaterial = SubResource("PhysicsMaterial_ul6p0")
headCollision = NodePath("CollisionShape3D")
particle = NodePath("top_particle")
hitCheckTimer = NodePath("HitCheckTimer")
hitParticleScene = ExtResource("2_qrxi8")
nameTag = NodePath("TopHead/NameTag")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(0.3, 0, 0, 0, 0.3, 0, 0, 0, 0.3, 0, 0, 0)
visible = false
mesh = SubResource("SphereMesh_ufdw3")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("SphereShape3D_xsedg")

[node name="top_particle" parent="." instance=ExtResource("2_xsedg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.0914399)
process_material = SubResource("ParticleProcessMaterial_ywf0b")
draw_pass_1 = SubResource("BoxMesh_em0n2")

[node name="TopHead" type="Node3D" parent="."]
top_level = true

[node name="TopHeadMesh" type="MeshInstance3D" parent="TopHead"]
transform = Transform3D(0.277926, 0, 0, 0, -2.19859e-09, -0.278078, 0, 0.0502978, -1.21552e-08, 0, 0, 0)
mesh = SubResource("CylinderMesh_ufdw3")
skeleton = NodePath("../..")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="TopHead"]
transform = Transform3D(0.0669603, 0, 0, 0, -2.55157e-09, 0.0558242, 0, -0.0583731, -2.44015e-09, 0, 0, 0.0757956)
mesh = SubResource("CapsuleMesh_ufdw3")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_akg2w")

[node name="NameTag" type="Label3D" parent="TopHead"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.158)
visible = false
billboard = 1
modulate = Color(1, 1, 1, 0.0862745)
outline_modulate = Color(0, 0, 0, 0.192157)
text = "You"
font_size = 16

[node name="StaminaTimer" type="Timer" parent="."]

[node name="HitCheckTimer" type="Timer" parent="."]
wait_time = 0.3

[connection signal="body_shape_entered" from="." to="." method="_on_body_shape_entered"]
